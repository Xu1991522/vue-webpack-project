(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{Xp2L:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,"close-on-click-modal":!1,width:"20%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("span",{staticClass:"popup-text-top"},[e._v("您确定开通代理商账户?")]),r("div",{staticClass:"popup-text-bottom"},[e._v("此开通账户操作不可逆")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addOrgCategory}},[e._v("确 定")])],1)]),e.opened?r("div",[r("div",{staticClass:"top"},[r("div",{staticClass:"value-container"},[r("div",{staticClass:"icon-style icon-moneybag"}),r("div",{staticClass:"text"},[e._v("账户余额")]),r("div",{staticClass:"value-num"},[e._v("¥"+e._s(e.OrganizationBean.balance))])]),r("div",{staticClass:"right-bottom-container"},[r("el-button",{staticClass:"charge",on:{click:e.withdrawall}},[e._v("全部提现")])],1)]),r("div",{staticClass:"middle-line"}),r("div",{staticClass:"bottom"},[r("div",{staticClass:"title"},[e._v("余额明细")]),r("div",{staticClass:"search-row"},[r("span",{staticClass:"search-type"},[e._v("渠道商名称")]),r("el-select",{attrs:{placeholder:"请选择渠道商"},on:{change:e.listBrokerOrders},model:{value:e.distributorId,callback:function(t){e.distributorId=t},expression:"distributorId"}},[r("el-option",{attrs:{label:"全部渠道商",value:""}}),e._l(e.BrokerOrderlist,function(e){return r("el-option",{key:e.distributorId,attrs:{label:e.distributorName,value:e.distributorId}})})],2),r("span",{staticClass:"racleicon reverse",on:{click:function(t){e.listOrdersByConditions("referesh")}}}),r("span",{staticClass:"racleicon donwload"})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.brokerOrderBeans,"max-height":e.clientHeight,border:""}},[r("el-table-column",{attrs:{label:"渠道商","min-width":e.brokerOrderBeans.every(function(e){return""===e.distributorName||null===e.distributorName})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(""===t.row.distributorName||null===t.row.distributorName?"-":t.row.distributorName)+"\n              ")]}}])}),r("el-table-column",{attrs:{label:"关联销售","min-width":e.brokerOrderBeans.every(function(e){return""===e.salerName||null===e.salerName})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(""===t.row.salerName||null===t.row.salerName?"-":t.row.salerName)+"\n              ")]}}])}),r("el-table-column",{attrs:{label:"可提金额","min-width":e.brokerOrderBeans.every(function(e){return""===e.amount||null===e.amount})?"90":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(""===t.row.amount||null===t.row.amount?"-":"¥"+t.row.amount)+"\n              ")]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.towithdraw(t.row.distributorId)}}},[e._v("提现")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){e.todetail(t.row.distributorId)}}},[e._v("交易明细")])]}}])})],1),r("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,40,50],"current-page":e.pager.pageIndex,layout:"sizes, prev, pager, next","page-size":e.pager.pageSize,total:e.pager.recCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):e._e(),e.opened?e._e():r("div",{staticClass:"no-proxy"},[r("div",{staticClass:"remind-text"}),r("el-button",{staticClass:"openbutton",on:{click:function(t){e.dialogVisible=!e.dialogVisible}}},[e._v("开通渠道商账")])],1)],1)},i=[],n=(r("VRzm"),r("19FS")),o=r("Nlzp"),s={data:function(){return{opened:!1,dialogVisible:!1,loading:!0,clientHeight:0,distributorId:"",BrokerOrderlist:[],brokerOrderBeans:[],OrganizationBean:{balance:""},pager:{pageIndex:1,pageSize:10,recCount:0}}},computed:{user:function(){return this.$store.getters.user}},created:function(){this.clientHeight=document.body.clientHeight>=794?550:160,this.getOrg()},methods:{addOrgCategory:function(){var e=this;o["a"].IAccountManager.addOrgCategory({orgId:this.user.orgId,orgCategory:"BROKER"}).then(function(t){e.$message({type:"success",message:"开通成功"}),e.dialogVisible=!e.dialogVisible,window.location.reload()}).catch(function(t){e.$message({type:"error",message:t.message||"开通失败"})})},towithdraw:function(e){this.$router.push({path:"proxy/withdraw",query:{distributorId:e,orgCategory:"BROKER"}})},todetail:function(e){},getOrg:function(){var e=this;o["a"].IAccountManager.getOrg({orgId:this.user.orgId}).then(function(t){e.opened="BROKER"===t.orgCategory,"BROKER"===t.orgCategory&&(e.OrganizationBean.balance=t.distributorBalance||t.brokerBalance,e.listBrokerOrdersInfo(),e.listBrokerOrders())}).catch(function(t){e.$message({type:"error",message:t.message||"获取余额失败"})})},listBrokerOrdersInfo:function(){var e=this;o["a"].IAccountManager.listBrokerOrdersInfo({distributorId:this.user.orgId}).then(function(t){e.loading=!1,e.BrokerOrderlist=t}).catch(function(t){e.$message({type:"error",message:t.message||"获取关联渠道商列表失败"})})},listBrokerOrders:function(e){var t=this;o["a"].IAccountManager.listBrokerOrders({brokerId:this.user.orgId,distributorId:this.distributorId,index:this.pager.pageIndex-1,pageSize:this.pager.pageSize}).then(function(r){t.brokerOrderBeans=r.brokerOrderBeans,t.pager.pageIndex=r.index,t.pager.recCount=r.totalElements,"refresh"===e&&t.$message({type:"success",message:"数据刷新"})}).catch(function(e){t.$message({type:"error",message:e.message||"获取表格失败"})})},withdrawall:function(){this.$router.push({path:"proxy/withdraw",query:{title:"提现",orgCategory:"BROKER"}})},handleCurrentChange:function(e){this.pager.pageIndex=e,this.listByCondition()},handleSizeChange:function(e){this.pager.pageSize=e,this.listByCondition()}},filters:{time:function(e,t){return e?n["format"](e,t):"-"}}},l=s,d=(r("gvt1"),r("KHd+")),c=Object(d["a"])(l,a,i,!1,null,"29e84729",null);t["default"]=c.exports},YQJo:function(e,t,r){},gvt1:function(e,t,r){"use strict";var a=r("YQJo"),i=r.n(a);i.a}}]);
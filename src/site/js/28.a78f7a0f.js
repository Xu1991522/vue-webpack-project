(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"2P8U":function(e,t,a){"use strict";var n=a("MdE0"),o=a.n(n);o.a},MdE0:function(e,t,a){},Ncd3:function(e,t,a){"use strict";a("rGqo"),a("yt8O");var n=a("iv4g"),o=a("XJYT"),r=a("Nlzp"),s=function(e){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank");var a=document.body;t.style.display="none",a.appendChild(t),t.click(),a.removeChild(t)},l={taskNames:[],timeout:null},i=function e(){var t=Object(n["a"])(l.taskNames);Promise.all(t.map(function(e){return r["a"].ITaskManager.getTaskResult({name:e})})).then(function(e){if(t.length!==l.taskNames.length)return t;var a={};return e.forEach(function(e,n){1===e.process?s("/portal-srv/downLoadFile?fileUrl="+e.fileLocation):-1===e.process?Object(o["Notification"])({type:"error",message:"文件下载任务("+e.taskIdentify+")失败: "+e.errorMsg}):null===e.process||0===e.process?a[t[n]]=1:Object(o["Notification"])({type:"error",message:"未知的文件下载任务状态: "+e.process})}),t.filter(function(e){return a[e]})}).catch(function(e){return t}).then(function(a){t.length===l.taskNames.length&&a.length&&(l.taskNames=a,l.timeout=setTimeout(e,5e3))})},c=function(e){l.taskNames.push(e),l.timeout&&clearTimeout(l.timeout),i()},p=function(e){l.taskNames=l.taskNames.filter(function(t){return t!==e})},d={add:c,remove:p};t["a"]=d},QM0R:function(e,t,a){"use strict";var n=a("19FS"),o=function(e,t){return e?n["format"](e,t):"-"};t["a"]=o},lqo8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cardmanage--useage-pane",on:{click:function(t){e.menuparameter.show=!1}}},[a("div",{staticClass:"bottom"},["ADMIN"!==e.user.roleBean.label&&e.access.groupshow?a("el-button",{staticStyle:{position:"absolute",top:"0",right:"160px","z-index":"99"},attrs:{size:"small",type:"primary"},on:{click:e.turnrouter}},[e._v("分组管理")]):e._e(),a("el-button",{staticStyle:{position:"absolute",top:"0",right:"10px","z-index":"99"},attrs:{size:"small",type:"primary"},on:{click:e.excelCards}},[e._v("导出搜索结果")]),a("el-row",{staticStyle:{"line-height":"36px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入卡号、ICCID"},model:{value:e.condition.cardNumberOrIccid,callback:function(t){e.$set(e.condition,"cardNumberOrIccid",t)},expression:"condition.cardNumberOrIccid"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.listDetailInPageByCondition},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{border:"1px solid #038ae3",color:"#038ae3"},on:{click:e.choosesearchtype}},[e._v("高级搜索"),a("i",{class:[e.selectionshow?"el-icon-arrow-up":"el-icon-arrow-down","el-icon--right"],staticStyle:{margin:"0 -10px 0 10px"}})])],1)],1),e.selectionshow?a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:24}},[a("el-row",["ADMIN"===e.user.roleBean.label?a("el-col",{attrs:{span:7}},[a("span",{staticClass:"labe-text",staticStyle:{"margin-left":"14px"}},[e._v("供应商")]),a("el-select",{staticClass:"el-se-long",attrs:{placeholder:"请选择",filterable:""},model:{value:e.condition.providerId,callback:function(t){e.$set(e.condition,"providerId",t)},expression:"condition.providerId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.suppliers,function(e,t){return a("el-option",{key:t,attrs:{label:e.name+"("+e.enName+")-"+e.account,value:e.id}})})],2)],1):e._e(),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"labe-text",staticStyle:{"margin-left":"14px"}},[e._v("运营商")]),a("el-select",{staticClass:"el-se",attrs:{placeholder:"请选择"},model:{value:e.condition.operator,callback:function(t){e.$set(e.condition,"operator",t)},expression:"condition.operator"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.operators,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"labe-text"},[e._v("运营状态")]),a("el-select",{staticClass:"el-se",attrs:{placeholder:"请选择"},model:{value:e.condition.operatorStatus,callback:function(t){e.$set(e.condition,"operatorStatus",t)},expression:"condition.operatorStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.operatorstatus,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"labe-text"},[e._v("本地状态")]),a("el-select",{staticClass:"el-se",attrs:{placeholder:"请选择"},model:{value:e.condition.localStatus,callback:function(t){e.$set(e.condition,"localStatus",t)},expression:"condition.localStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.localstatus,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},["ADMIN"===e.user.roleBean.label?a("el-col",{attrs:{span:7}},[a("span",{staticClass:"labe-text"},[e._v("根代理商")]),a("el-select",{staticClass:"el-se-long",attrs:{placeholder:"请选择",filterable:"",disabled:""!==e.condition.ownnerId},model:{value:e.condition.proxyId,callback:function(t){e.$set(e.condition,"proxyId",t)},expression:"condition.proxyId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.proxybeans,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2)],1):e._e(),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"labe-text"},[e._v("卡拥有者")]),a("el-select",{staticClass:"el-se",attrs:{placeholder:"请选择",filterable:"",disabled:""!==e.condition.proxyId},model:{value:e.condition.ownnerId,callback:function(t){e.$set(e.condition,"ownnerId",t)},expression:"condition.ownnerId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.proxybeans,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2)],1),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"labe-text"},[e._v("激活时间")]),a("el-date-picker",{staticClass:"el-se",attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.condition.activeTime,callback:function(t){e.$set(e.condition,"activeTime",t)},expression:"condition.activeTime"}})],1),a("el-col",{attrs:{span:7}},[a("span",{staticClass:"labe-text"},[e._v("备注内容")]),a("el-input",{staticStyle:{width:"43%"},attrs:{placeholder:"请输入备注"},model:{value:e.condition.remark,callback:function(t){e.$set(e.condition,"remark",t)},expression:"condition.remark"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.listDetailInPageByCondition}},[e._v("搜索")])],1)],1)],1)],1):e._e(),e.ids.length?a("div",{staticStyle:{"margin-top":"5px"}},[a("div",{staticStyle:{"line-height":"36px",display:"inline-block","font-size":"14px"}},[e._v("已选择"+e._s(e.ids.length)+"条")]),a("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary"}},[e._v("\n            移动到"),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-left":"15px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(t){e.moveToGroup("",!1)}}},[e._v("无")])]),e._l(e.groups,function(t,n){return a("el-dropdown-item",{key:n},[a("div",{on:{click:function(a){e.moveToGroup(t.groupId,!1)}}},[e._v(e._s(t.groupName))])])})],2)],1),a("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary"}},[e._v("\n            分配给代理"),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-left":"15px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.proxybeans,function(t,n){return a("el-dropdown-item",{key:n},[a("div",{on:{click:function(a){e.asignToProxy(t.id,t.name,!1)}}},[e._v(e._s(t.name))])])}))],1),a("el-button",{staticStyle:{width:"100px","margin-left":"35px"},attrs:{type:"primary"},on:{click:function(t){e.showremarkpop(!1)}}},[e._v("\n            添加备注\n          ")])],1):e._e(),a("Contextmenu",{attrs:{menuparameter:e.menuparameter},on:{selectedchanged:e.selectedchanged}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"pagebean",staticStyle:{width:"100%","margin-top":"5px"},attrs:{border:"",data:e.pagebean,"tooltip-effect":"dark","max-height":e.clientHeight},on:{"header-contextmenu":e.headerclick,"selection-change":e.handleSelectionChange}},["ADMIN"!==e.user.roleBean.label?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e.menuparameter.selected.indexOf("操作")>-1?a("el-table-column",{attrs:{label:"操作",fixed:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"}},[a("el-button",{staticClass:"el-dropdown-link",style:{color:"ADMIN"===e.user.roleBean.label?"#038ae3":t.row.ownerId===e.user.id&&e.access.append?"#038ae3":"#EEEEEE"},attrs:{type:"text",disabled:"ADMIN"!==e.user.roleBean.label&&(t.row.ownerId!==e.user.id||!e.access.append)}},[e._v("操作")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["中国移动"!==t.row.operatorName&&"中国电信"!==t.row.operatorName&&"中国联通"!==t.row.operatorName||"ADMIN"===e.user.roleBean.label?e._e():a("el-dropdown-item",[e._v("移动分组到\n                "),a("el-dropdown",{staticClass:"innerdrop",attrs:{placement:"right-start"}},[a("div",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-caret-right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(a){e.moveToGroup("",!0,t.row.id)}}},[e._v("无")])]),e._l(e.groups,function(n,o){return a("el-dropdown-item",{key:o},[a("div",{on:{click:function(a){e.moveToGroup(n.groupId,!0,t.row.id)}}},[e._v(e._s(n.groupName))])])})],2)],1)],1),"ADMIN"!==e.user.roleBean.label?a("el-dropdown-item",[a("div",{on:{click:function(a){e.showremarkpop(!0,t.row.id)}}},[e._v("备注名称")])]):e._e(),e.access.append?a("el-dropdown-item",[a("div",{on:{click:function(a){e.showupdateflowpop(t.row.id)}}},[e._v("更改资费计划")])]):e._e(),e.access.append?a("el-dropdown-item",[a("div",{on:{click:function(a){e.showaddpackagepop(t.row.id)}}},[e._v("叠加流量")])]):e._e(),"中国移动"!==t.row.operatorName&&"中国联通"!==t.row.operatorName&&"中国电信"!==t.row.operatorName||"ADMIN"===e.user.roleBean.label?e._e():a("el-dropdown-item",[e._v("移动代理到\n                "),a("el-dropdown",{staticClass:"innerdrop",attrs:{placement:"right-start"}},[a("div",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-caret-right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.proxybeans,function(n,o){return a("el-dropdown-item",{key:o},[a("div",{on:{click:function(a){e.asignToProxy(n.id,n.name,!0,t.row.id)}}},[e._v(e._s(n.name))])])}))],1)],1)],1)],1)]}}])}):e._e(),a("el-table-column",{attrs:{label:"卡号","min-width":e.pagebean.every(function(e){return""===e.cardNumber||null===e.cardNumber})?"60":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.cardNumber||null===t.row.cardNumber?"-":t.row.cardNumber)+"\n        ")]}}])}),e.menuparameter.selected.indexOf("ICCID")>-1?a("el-table-column",{attrs:{label:"ICCID",width:e.getmaxlength(function(e){return e.iccid||"-"},"iccid")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.iccid||null===t.row.iccid?"-":t.row.iccid)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("IMSI")>-1?a("el-table-column",{attrs:{label:"IMSI",width:e.getmaxlength(function(e){return e.imsi||"-"},"imsi")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.imsi||null===t.row.imsi?"-":t.row.imsi)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("IMEI")>-1?a("el-table-column",{attrs:{label:"IMEI",width:e.getmaxlength(function(e){return e.imei||"-"},"imsi")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.imei||null===t.row.imei?"-":t.row.imei)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("运营商")>-1?a("el-table-column",{attrs:{prop:"operatorName",label:"运营商",width:"80"}}):e._e(),"ADMIN"===e.user.roleBean.label&&e.menuparameter.selected.indexOf("供应商")>-1?a("el-table-column",{attrs:{prop:"providerName",label:"供应商",width:"80"}}):e._e(),"ADMIN"===e.user.roleBean.label&&e.menuparameter.selected.indexOf("根代理/上级代理")>-1?a("el-table-column",{attrs:{label:"根代理/上级代理",width:e.getmaxlength(function(e){return e.rootProxyName+"/"+e.parentProxyName},"根代理/上级代理")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.rootProxyName+"/"+a.parentProxyName)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("实际拥有者")>-1?a("el-table-column",{attrs:{prop:"ownnerName",label:"实际拥有者",width:"100"}}):e._e(),e.menuparameter.selected.indexOf("计费类型")>-1?a("el-table-column",{attrs:{prop:"chargeTypeName",label:"计费类型",width:"80"}}):e._e(),e.menuparameter.selected.indexOf("本地状态")>-1?a("el-table-column",{attrs:{label:"本地状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.localStatusName||null===t.row.localStatusName?"-":t.row.localStatusName)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("运营状态")>-1?a("el-table-column",{attrs:{label:"运营状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.operatorStatusName||null===t.row.operatorStatusName?"-":t.row.operatorStatusName)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("开卡时间")>-1?a("el-table-column",{attrs:{label:"开卡时间",width:e.pagebean.every(function(e){return""===e.openTime||null===e.openTime})?"80":"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.openTime,"yyyy-MM-dd HH:mm:ss")))])]}}])}):e._e(),e.menuparameter.selected.indexOf("激活时间")>-1?a("el-table-column",{attrs:{label:"激活时间",width:e.pagebean.every(function(e){return""===e.activeTime||null===e.activeTime})?"80":"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.activeTime,"yyyy-MM-dd HH:mm:ss")))])]}}])}):e._e(),e.menuparameter.selected.indexOf("备注")>-1?a("el-table-column",{attrs:{label:"备注",width:e.getmaxlength(function(e){return e.remark||"-"},"remark")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(""===t.row.remark||null===t.row.remark?"-":t.row.remark)+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("分组")>-1?a("el-table-column",{attrs:{label:"分组",width:e.getmaxlength(function(e){return e.groupName||"-"},"分组")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.groupName||"-")+"\n        ")]}}])}):e._e(),e.menuparameter.selected.indexOf("详细信息")>-1?a("el-table-column",{attrs:{label:"详细信息",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate-text",on:{click:function(a){e.getCardDetailInfo(t.row.id)}}},[e._v("查看")])]}}])}):e._e()],1),a("el-pagination",{attrs:{background:"","current-page":e.pager.pageIndex,"page-sizes":[10,20,30,40,50],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.recCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"编辑备注名称","close-on-click-modal":!1,visible:e.remarkpop,width:"30%"},on:{"update:visible":function(t){e.remarkpop=t}}},[a("div",{staticClass:"content"},[e._v("\n      备注:"),a("el-input",{staticStyle:{width:"340px","margin-left":"15px"},attrs:{placeholder:"请输入0-20个字符，留空表示删除备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.remarkpop=!1}}},[e._v("取消")]),a("el-button",{staticClass:"confirm-button",on:{click:e.updateRemark}},[e._v("确定")])],1)]),a("el-dialog",{attrs:{title:"叠加流量","close-on-click-modal":!1,visible:e.addpackagepop,width:"30%"},on:{"update:visible":function(t){e.addpackagepop=t}}},[a("div",{staticClass:"content"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[e._v("套餐类型:")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.filterpackageType},model:{value:e.packageType,callback:function(t){e.packageType=t},expression:"packageType"}},e._l(e.types,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.packageType}})}))],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[e._v("套餐名称:")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.packageId,callback:function(t){e.packageId=t},expression:"packageId"}},e._l(e.flowpackagebean,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addpackagepop=!1}}},[e._v("取消")]),a("el-button",{staticClass:"confirm-button",on:{click:e.addFlowPackage}},[e._v("确定")])],1)]),a("el-dialog",{attrs:{title:"更改资费计划","close-on-click-modal":!1,visible:e.updateflowpop,width:"30%"},on:{"update:visible":function(t){e.updateflowpop=t}}},[a("div",{staticClass:"content"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[e._v("套餐类型:")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.filterpackageType},model:{value:e.packageType,callback:function(t){e.packageType=t},expression:"packageType"}},e._l(e.types,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.packageType}})}))],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[e._v("套餐名称:")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.packageId,callback:function(t){e.packageId=t},expression:"packageId"}},e._l(e.flowpackagebean,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateflowpop=!1}}},[e._v("取消")]),a("el-button",{staticClass:"confirm-button",on:{click:e.updateFlowPackage}},[e._v("确定")])],1)]),a("el-dialog",{attrs:{title:(e.popinfo.cardNumber?"卡号 "+e.popinfo.cardNumber:"ICCID "+e.popinfo.iccid)+" 详情","close-on-click-modal":!1,visible:e.infopop,width:e.clientWidth},on:{"update:visible":function(t){e.infopop=t}}},[a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:7}},[e._v("ICCID:"+e._s(e.popinfo.iccid)+" ")]),a("el-col",{attrs:{span:7}},[e._v("IMSI:"+e._s(e.popinfo.imsi||"-"))]),a("el-col",{attrs:{span:7}},[e._v("IMEI:"+e._s(e.popinfo.imei||"-"))])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("状态信息:")]),a("el-col",{attrs:{span:21}},[e._v(e._s(e.popinfo.operatorStatusName))])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("运营商:")]),a("el-col",{attrs:{span:21}},[e._v(e._s(e.popinfo.operatorName))])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("开卡时间:")]),a("el-col",{attrs:{span:21}},[e._v(e._s(e._f("time")(e.popinfo.openTime,"yyyy-MM-dd HH:mm:ss")))])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("激活时间:")]),a("el-col",{attrs:{span:21}},[e._v(e._s(e._f("time")(e.popinfo.activeTime,"yyyy-MM-dd HH:mm:ss")))])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("其他信息:")]),a("el-col",{attrs:{span:21}},[a("pre",[e._v(e._s(e._f("html")(e.popinfo.appendix)))])])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("套餐总量: ")]),a("el-col",{attrs:{span:21}},[e._v(e._s(e.allmount)+"KB"),e.access.rectify?a("span",{staticStyle:{color:"#1EA185",cursor:"pointer","margin-left":"5px"},on:{click:function(t){e.fixedrowshow=!e.fixedrowshow}}},[e._v("校正")]):e._e()])],1),e.access.append&&e.fixedrowshow?a("el-row",{attrs:{gutter:"10"}},[a("el-col",{attrs:{span:3}},[e._v("确认添加:")]),a("el-col",{attrs:{span:11}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.showtotal},model:{value:e.packageId,callback:function(t){e.packageId=t},expression:"packageId"}},e._l(e.flowpackagebean,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{disabled:!0},model:{value:e.totalmount,callback:function(t){e.totalmount=t},expression:"totalmount"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"confirm-button",staticStyle:{width:"100%","margin-left":"10px"},on:{click:e.checkPackage}},[e._v("确认")])],1)],1):e._e(),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("订购套餐:")]),a("el-col",{attrs:{span:20}},[a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.popinfo.orderPackages}},[a("el-table-column",{attrs:{prop:"pack.name",label:"套餐名称","min-width":"3"}}),a("el-table-column",{attrs:{label:"生效时间","min-width":"3"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.orderTime,"yyyy-MM-dd HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{label:"套餐总量","min-width":"2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("conver")(1024*Number(t.row.total))))])]}}])}),a("el-table-column",{attrs:{label:"套餐剩余量","min-width":"2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("conver")(1024*Number(t.row.remainder))))])]}}])}),a("el-table-column",{attrs:{prop:"utilizationRate",label:"套餐使用率","min-width":"2"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"confirm-button",on:{click:function(t){e.infopop=!1}}},[e._v("知道了")])],1)])],1)},o=[],r=(a("dRSK"),a("xfY5"),a("yt8O"),a("RW0V"),a("91GP"),a("oyJW")),s=a("yT7P"),l=(a("rGqo"),a("pIFo"),a("Nlzp")),i=a("Ncd3"),c=a("QM0R"),p=function(e){return e?e.replace(/&nbsp;/g," ").replace(/<br(\/?)>/g,"\n"):"-"},d=function(e){var t="";t=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var a=t+"",n=a.indexOf("."),o=a.substr(n+1,2);return"00"===o?a.substring(0,n)+a.substr(n+3,2):a},u={name:"",data:function(){return{fixedrowshow:!1,user:{},loading:!0,selectionshow:!1,infopop:!1,addpackagepop:!1,remarkpop:!1,updateflowpop:!1,operators:[{value:"CMCC",label:"中国移动"},{value:"UNICOM",label:"中国联通"},{value:"CNET",label:"中国电信"}],suppliers:[],localstatus:[{value:"ABANDON",label:"废弃"},{value:"NORMAL",label:"正常"}],operatorstatus:[{value:"STOPPED",label:"停机"},{value:"USING",label:"正使用中"},{value:"WAITING_TO_ACTIVATE",label:"待激活"},{value:"REPORTED_LOST",label:"挂失"},{value:"APPOINT_TO_CANCEL_ACCOUNT",label:"预约销户"}],types:[{packageType:1,name:"月包"},{packageType:2,name:"季包"},{packageType:3,name:"半年包"},{packageType:4,name:"年包"},{packageType:5,name:"叠加包"}],proxybeans:[],CardCountSummary:{},popinfo:{},flowpackagebean:[],condition:{operatorStatus:"",remark:"",activeTime:"",proxyId:"",providerId:"",localStatus:"",ownnerId:"",operator:"",cardNumberOrIccid:""},pagebean:[],totalmount:"",cardId:"",singleid:"",single:!1,packageId:"",ids:[],remark:"",clientHeight:0,clientWidth:0,allmount:0,filteredtypes:[],packageType:"",multipleSelection:[],options:[{value:1,label:"1"}],input:"",pager:{pageIndex:1,pageSize:10,recCount:0},menuparameter:{}}},computed:{access:function(){var e=this.$store.getters.access,t=e.APPEND_PACKAGE,a=e.RECTIFY_FLOW,n=e.UPDATE_GROUP;return{append:t,rectify:a,groupshow:n}}},created:function(){this.user=this.$store.getters.user,"ADMIN"===this.user.roleBean.label?this.menuparameter={show:!1,position:{},list:["操作","ICCID","IMEI","IMSI","供应商","根代理/上级代理","运营商","实际拥有者","计费类型","本地状态","运营状态","开卡时间","激活时间","备注","分组","详细信息"],selected:["操作","ICCID","IMEI","IMSI","供应商","根代理/上级代理","运营商","实际拥有者","计费类型","本地状态","运营状态","开卡时间","激活时间","备注","分组","详细信息"]}:this.menuparameter={show:!1,position:{},list:["操作","ICCID","IMEI","IMSI","运营商","实际拥有者","计费类型","本地状态","运营状态","开卡时间","激活时间","备注","分组","详细信息"],selected:["操作","ICCID","IMEI","IMSI","运营商","实际拥有者","计费类型","本地状态","运营状态","开卡时间","激活时间","备注","分组","详细信息"]},this.clientHeight=document.body.clientHeight>=794?550:280,this.clientWidth=document.body.clientWidth>1600?"45%":"70%",this.access.groupshow&&this.getGroupsById(),this.getSummary(),this.listDetailInPage(),this.listBriefProviders(),this.listBriefProxies()},methods:{getmaxlength:function(e,t){var a=0;return this.pagebean.forEach(function(t){var n=e(t),o=n.replace(/[^0-9a-zA-Z]/g,"--").length;a=o>a?o:a}),t&&a<t.replace(/[^0-9a-zA-Z]/g,"--").length&&(a=t.replace(/[^0-9a-zA-Z]/g,"--").length),8*a+21},getGroupsById:function(){var e=this;l["a"].ICardGroupManager.getGroupsById({id:this.user.id}).then(function(t){e.groups=t}).catch(function(t){e.$message({message:t,type:"error"})})},getSummary:function(){var e=this;l["a"].ICardManager.getSummary({}).then(function(t){e.CardCountSummary=t.countByOperator.reduce(function(e,t){return Object(s["a"])({},e,Object(r["a"])({},t.label,t.inStore))},{}),e.CardCountSummary.total=t.total}).catch(function(t){e.$message({message:t,type:"error"})})},listDetailInPage:function(){var e=this;l["a"].ICardManager.listDetailInPage({page:this.pager.pageIndex-1,size:this.pager.pageSize}).then(function(t){e.loading=!1,e.pagebean=t.content,e.pager.pageIndex=t.number+1,e.pager.pageSize=t.size,e.pager.recCount=t.totalElements}).catch(function(t){e.$message({message:t,type:"error"})})},listBriefProviders:function(){var e=this;l["a"].IProviderManager.listBriefProviders({}).then(function(t){e.suppliers=t}).catch(function(t){e.$message({message:t,type:"error"})})},listBriefProxies:function(){var e=this;l["a"].IProxyManager.listBriefProxies({}).then(function(t){e.proxybeans=t}).catch(function(t){e.$message({message:t,type:"error"})})},listDetailInPageByCondition:function(){var e=this,t=Object.assign({},this.condition);Object.keys(t).forEach(function(e){""===t[e]&&(t[e]=null)}),l["a"].ICardManager.listDetailInPageByCondition({page:this.pager.pageIndex-1,size:this.pager.pageSize,condition:t}).then(function(t){e.loading=!1,e.pagebean=t.content,e.pager.pageIndex=t.number+1,e.pager.pageSize=t.size,e.pager.recCount=t.totalElements}).catch(function(t){e.$message({message:t,type:"error"})})},getCardDetailInfo:function(e){var t=this;this.cardId=e,this.fixedrowshow=!1,this.packageId="",this.totalmount="",l["a"].ICardManager.getCardDetailInfo({cardId:e}).then(function(a){t.popinfo=a,t.allmount=a.orderPackages.reduce(function(e,t){return e+Number(t.pack.total)},0),t.listFlowPackageByCardId(e),t.infopop=!0}).catch(function(e){t.$message({message:e,type:"error"})})},fixedmount:function(){var e=this;l["a"].ICardManager.getCardDetailInfo({cardId:this.cardId}).then(function(t){t?(e.popinfo=t,e.allmount=t.orderPackages.reduce(function(e,t){return e+Number(t.pack.total)},0)):e.$message({message:"操作失败",type:"error"})}).catch(function(t){e.$message({message:t,type:"error"})})},listFlowPackageByCardId:function(e){var t=this;l["a"].ICardManager.listFlowPackageByCardId({id:e}).then(function(e){t.flowpackagebean=e}).catch(function(e){t.$message({message:e,type:"error"})})},showtotal:function(e){this.totalmount=this.flowpackagebean.find(function(t){return t.id===e}).total},updateFlowPackage:function(){var e=this;""===this.cardId||""===this.packageId?this.$message({message:"请选择套餐类型和套餐名称",type:"warning"}):l["a"].ICardManager.updateFlowPackage({cardId:this.cardId,packageId:this.packageId}).then(function(t){0===Number(t.code)?(e.$message({message:"操作成功",type:"success"}),e.updateflowpop=!1,e.listDetailInPageByCondition()):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:t,type:"error"})})},checkPackage:function(){var e=this;""===this.packageId?this.$message({message:"请选择添加套餐",type:"warning"}):l["a"].ICardManager.checkPackage({cardId:this.cardId,packageId:this.packageId}).then(function(t){0===Number(t.code)?(e.$message({message:"操作成功",type:"success"}),e.listDetailInPageByCondition()):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:t,type:"error"})})},addFlowPackage:function(){var e=this;""===this.packageId?this.$message({message:"请选择添加套餐",type:"warning"}):l["a"].ICardManager.addFlowPackage({cardId:this.cardId,packageId:this.packageId}).then(function(t){e.fixedmount(),0===Number(t.code)?(e.$message({message:"操作成功",type:"success"}),e.addpackagepop=!1,e.listDetailInPageByCondition()):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:t,type:"error"})})},showremarkpop:function(e,t){this.remark="",this.single=e,this.singleid=e?t:"",this.remarkpop=!0},showaddpackagepop:function(e){this.cardId=e,this.addpackagepop=!0,this.packageId="",this.packageType="",this.listFlowPackageByCardId(e)},showupdateflowpop:function(e){this.cardId=e,this.packageId="",this.packageType="",this.updateflowpop=!0,this.listFlowPackageByCardId(e)},moveToGroup:function(e,t,a){var n=this;this.singleid=t?a:"",l["a"].ICardManager.moveToGroup({ids:t?[this.singleid]:this.ids.map(function(e){return e.id}),groupId:""===e?null:e}).then(function(e){e?(n.$message({message:"操作成功",type:"success"}),n.listDetailInPageByCondition()):n.$message({message:"操作失败",type:"error"})}).catch(function(e){n.$message({message:e,type:"error"})})},asignToProxy:function(e,t,a,n){var o=this,r=this.$createElement;this.singleid=a?n:"",this.$msgbox({title:"提示",message:r("div",["您确定要把该卡分配给[ ",t," ]吗?",r("br"),"分配后您将无权再对该卡进行操作且操作不可逆!"]),showCancelButton:!0}).then(function(t){l["a"].ICardManager.asignToProxy({ids:a?[o.singleid]:o.ids.map(function(e){return e.id}),proxyId:e}).then(function(e){e?(o.$message({message:"操作成功",type:"success"}),o.listDetailInPageByCondition()):o.$message({message:"操作失败",type:"error"})})}).catch(function(e){return e})},updateRemark:function(){var e=this;this.remark.length>20?this.$message({message:"备注为0-20个字符，请重新输入",type:"warning"}):l["a"].ICardManager.updateRemark({ids:this.single?[this.singleid]:this.ids.map(function(e){return e.id}),remark:this.remark}).then(function(t){t?(e.$message({message:"操作成功",type:"success"}),e.remarkpop=!1,e.listDetailInPageByCondition()):e.$message({message:"操作失败",type:"error"})}).catch(function(t){e.$message({message:t,type:"error"})})},excelCards:function(){var e=this,t=Object.assign({},this.condition);Object.keys(t).forEach(function(e){""===t[e]&&(t[e]=null)}),l["a"].ICardManager.excelCards({condition:t}).then(function(t){if(!t.fileUrl)return Promise.reject(Error(t.message));e.$message({type:"success",message:"文件下载任务已开启，文件生成后将提醒您下载"}),i["a"].add(t.fileUrl)}).catch(function(t){e.$message({type:"error",message:t.message||"文件生成失败"})})},choosesearchtype:function(){this.selectionshow=!this.selectionshow},turnrouter:function(){this.$router.push({path:"/cardManage/cardDivide",query:{title:"卡分组管理"}})},filterpackageType:function(){var e=this;this.filteredtypes=this.flowpackagebean.filter(function(t){return t.packageType===e.packageType})},handleSelectionChange:function(e){var t=this,a=[];this.pagebean.forEach(function(e,n){e.ownerId!==t.user.id&&a.push(t.pagebean[n])}),a.forEach(function(e){t.$refs.pagebean.toggleRowSelection(e,!1)}),this.ids=e.filter(function(e){return e.ownerId===t.user.id})},selectedchanged:function(e){this.menuparameter.selected=e},headerclick:function(e,t){this.menuparameter.position.clientX=t.clientX,this.menuparameter.position.clientY=t.clientY,this.menuparameter.show=!0,t.preventDefault()},handleCurrentChange:function(e){this.pager.pageIndex=e,this.listDetailInPageByCondition()},handleSizeChange:function(e){this.pager.pageSize=e,this.listDetailInPageByCondition()}},filters:{time:c["a"],html:p,conver:d}},m=u,g=(a("qHJ5"),a("2P8U"),a("KHd+")),f=Object(g["a"])(m,n,o,!1,null,"4d6ff62e",null);t["default"]=f.exports},lsZb:function(e,t,a){},qHJ5:function(e,t,a){"use strict";var n=a("lsZb"),o=a.n(n);o.a}}]);
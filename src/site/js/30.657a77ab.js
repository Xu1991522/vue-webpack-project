(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"768G":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{click:function(t){e.menuparameter.show=!1}}},[a("Contextmenu",{attrs:{menuparameter:e.menuparameter},on:{selectedchanged:e.selectedchanged}}),a("div",{staticClass:"common-top-nav-row"},[a("span",{staticStyle:{"line-height":"36px",float:"left","margin-right":"10px",color:"#606266","font-size":"14px"}},[e._v("供应商名称")]),a("el-select",{attrs:{filterable:"",placeholder:"请选择供应商"},on:{change:e.getProvider},model:{value:e.selectsupplier,callback:function(t){e.selectsupplier=t},expression:"selectsupplier"}},[a("el-option",{attrs:{label:"全部供应商",value:""}}),e._l(e.providerlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"("+e.enName+")-"+e.account,value:e.id}})})],2),e.access.add?a("el-button",{staticClass:"plus-button",attrs:{type:"info",size:"small"},on:{click:function(t){e.tochangeinfo("add")}}},[e._v("添加供应商")]):e._e()],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.providerbean,"max-height":e.clientHeight,border:""},on:{"header-contextmenu":e.headerclick}},[a("el-table-column",{attrs:{prop:"name",label:"通道名称","min-width":"167"}}),e.menuparameter.selected.indexOf("通道别名")>-1?a("el-table-column",{attrs:{prop:"alias",label:"通道别名",width:e.getmaxlength(function(e){return e.alias},"通道别名")}}):e._e(),e.menuparameter.selected.indexOf("所属账户")>-1?a("el-table-column",{attrs:{prop:"account",label:"所属账户",width:e.getmaxlength(function(e){return e.account},"所属账户")}}):e._e(),e.menuparameter.selected.indexOf("供应商号码")>-1?a("el-table-column",{attrs:{prop:"serviceNum",label:"供应商号码",width:e.getmaxlength(function(e){return e.account},"供应商号码")}}):e._e(),e.menuparameter.selected.indexOf("联系人")>-1?a("el-table-column",{attrs:{prop:"contactor",label:"联系人",width:e.getmaxlength(function(e){return e.contactor},"联系人")}}):e._e(),e.menuparameter.selected.indexOf("手机号")>-1?a("el-table-column",{attrs:{prop:"mobilePhone",label:"手机号",width:"110"}}):e._e(),e.menuparameter.selected.indexOf("运营商")>-1?a("el-table-column",{attrs:{label:"运营商",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("operator")(t.row.operator))+"\n      ")]}}])}):e._e(),e.menuparameter.selected.indexOf("创建时间")>-1?a("el-table-column",{attrs:{label:"创建时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.createOn,"yyyy-MM-dd HH:mm:ss")))])]}}])}):e._e(),e.menuparameter.selected.indexOf("登录账号")>-1?a("el-table-column",{attrs:{prop:"loginAccount",label:"登录账号",width:e.getmaxlength(function(e){return e.loginAccount},"登录账号")}}):e._e(),e.menuparameter.selected.indexOf("接口信息")>-1?a("el-table-column",{attrs:{label:"接口信息",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#038ae3",cursor:"pointer"},on:{click:function(a){e.showinfo(t.$index)}}},[e._v("查看详情")])]}}])}):e._e(),e.access.update?a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#038ae3",cursor:"pointer"},on:{click:function(a){e.tochangeinfo("edit",t.$index)}}},[e._v("修改")])]}}])}):e._e()],1),a("el-pagination",{attrs:{background:"","current-page":e.pager.pageIndex,"page-sizes":[10,20,30,40,50],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.recCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"接口信息","close-on-click-modal":!1,visible:e.infopop,width:"30%"},on:{"update:visible":function(t){e.infopop=t}}},[a("div",{staticStyle:{"margin-left":"20px"}},[e.popupparam.apiAccessKey||e.popupparam.apiSecretKey||e.popupparam.apiUrl?e._e():a("div",[e._v("暂无相关接口信息")]),e.popupparam.apiAccessKey||e.popupparam.apiSecretKey||e.popupparam.apiUrl?a("div",[a("div",{staticClass:"innerinfo"},[e._v("接口key:  "+e._s(""===e.popupparam.apiAccessKey||null===e.popupparam.apiAccessKey?"---":e.popupparam.apiAccessKey))]),a("div",{staticClass:"innerinfo"},[e._v("接口秘钥: "+e._s(""===e.popupparam.apiSecretKey||null===e.popupparam.apiSecretKey?"---":e.popupparam.apiSecretKey))]),a("div",{staticClass:"innerinfo"},[e._v("接口地址: "+e._s(""===e.popupparam.apiUrl||null===e.popupparam.apiUrl?"---":e.popupparam.apiUrl))])]):e._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"confirm-button",on:{click:function(t){e.infopop=!1}}},[e._v("确 定")])],1)])],1)},i=[],r=(a("pIFo"),a("rGqo"),a("QM0R")),o={data:function(){return{loading:!0,infopop:!1,providerbean:[],providerlist:[],selectsupplier:"",menuparameter:{show:!1,position:{},list:["通道别名","所属账户","供应商号码","联系人","手机号","运营商","创建时间","登录账号","接口信息"],selected:["通道别名","所属账户","供应商号码","联系人","手机号","运营商","创建时间","登录账号","接口信息"]},popupparam:{apiAccessKey:"",apiSecretKey:"",apiUrl:""},pager:{pageIndex:1,pageSize:10,recCount:0},clientHeight:0,title:""}},computed:{access:function(){var e=this.$store.getters.access,t=e.ADD_PROVIDER,a=e.UPDATE_PROVIDER;return{add:t,update:a}}},created:function(){this.clientHeight=document.body.clientHeight>662?550:400,this.listBriefProviders(),this.getProvider()},watch:{$route:function(e,t){this.listBriefProviders(),this.getProvider()}},methods:{getmaxlength:function(e,t){var a=0;return this.providerbean.forEach(function(t){var n=e(t),i=n?n.replace(/[^0-9a-zA-Z]/g,"--").length:0;a=i>a?i:a}),t&&a<t.replace(/[^0-9a-zA-Z]/g,"--").length&&(a=t.replace(/[^0-9a-zA-Z]/g,"--").length),8*a+21},getProvider:function(){var e=this;""!==this.selectsupplier?this.$api.IProviderManager.getProvider({id:this.selectsupplier}).then(function(t){e.providerbean=[],e.providerbean.push(t),e.pager.pageIndex=1,e.pager.pageSize=10,e.pager.recCount=1}):this.$api.IProviderManager.listProviders({page:this.pager.pageIndex-1,size:this.pager.pageSize}).then(function(t){e.providerbean=t.content,e.pager.pageIndex=t.number+1,e.pager.pageSize=t.size,e.pager.recCount=t.totalElements})},listBriefProviders:function(){var e=this;this.$api.IProviderManager.listBriefProviders({}).then(function(t){e.loading=!1,e.providerlist=t})},selectedchanged:function(e){this.menuparameter.selected=e},headerclick:function(e,t){this.menuparameter.position.clientX=t.clientX,this.menuparameter.position.clientY=t.clientY,this.menuparameter.show=!0,t.preventDefault()},tochangeinfo:function(e,t){"edit"===e?this.$router.push({path:"/supplierManage/infoHandle",query:{title:"edit"===e?"修改供应商":"添加供应商",ruleForm:JSON.stringify(this.providerbean[t])}}):this.$router.push({path:"/supplierManage/infoHandle",query:{title:"edit"===e?"修改供应商":"添加供应商"}})},showinfo:function(e){this.infopop=!this.infopop,this.popupparam.apiAccessKey=this.providerbean[e].apiAccessKey,this.popupparam.apiSecretKey=this.providerbean[e].apiSecretKey,this.popupparam.apiUrl=this.providerbean[e].apiUrl},handlsearch:function(){alert("组件触发搜索，在这里调接口")},handleCurrentChange:function(e){this.pager.pageIndex=e,this.getProvider()},handleSizeChange:function(e){this.pager.pageSize=e,this.getProvider()},turnrouter:function(e){this.$router.push({path:e})}},filters:{time:r["a"],channelStatus:function(e){var t={ENABLED:"启用",DISABLED:"关闭"};return t[e]||e},operator:function(e){var t={CMCC:"中国移动",UNICOM:"中国联通",CNET:"中国电信"};return t[e]||e}}},p=o,l=(a("P9VE"),a("KHd+")),s=Object(l["a"])(p,n,i,!1,null,"01932f15",null);t["default"]=s.exports},Oy8P:function(e,t,a){},P9VE:function(e,t,a){"use strict";var n=a("Oy8P"),i=a.n(n);i.a},QM0R:function(e,t,a){"use strict";var n=a("19FS"),i=function(e,t){return e?n["format"](e,t):"-"};t["a"]=i}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"4b5A":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("BackButton"),r("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"15px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"充值金额: ¥",prop:"depositAmount"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{"auto-complete":"off",placeholder:"0.00"},model:{value:e.ruleForm.depositAmount,callback:function(t){e.$set(e.ruleForm,"depositAmount",t)},expression:"ruleForm.depositAmount"}})],1),r("el-form-item",{attrs:{label:"充值凭证上传:"}},[r("el-upload",{staticClass:"upload__container upload--certUrl",attrs:{name:"file","show-file-list":!1,action:"/portal-srv/upload/idcard","before-upload":e.handleBeforeUpload,"on-success":e.handleUploadSuccess("certUrl"),"on-progress":e.handleUploadProgress("certUrl"),"on-remove":e.handleRemove}},[e.images.certUrl?r("img",{staticClass:"avatar",attrs:{src:e.images.certUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("充值")]),r("el-button",{on:{click:e.turnrouter}},[e._v("取消")])],1)],1)],1)},s=[],n=r("Nlzp"),a={data:function(){return{images:{certUrl:""},urls:{certUrl:""},progress:{certUrl:0},ruleForm:{depositAmount:""},rules:{depositAmount:[{required:!0,message:"请输入充值金额",trigger:"blur"}]}}},computed:{user:function(){return this.$store.getters.user}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.deposit()})},deposit:function(){var e=this;n["a"].IAccountManager.deposit({orgId:this.user.orgId,depositAmount:this.form.depositAmount,certUrl:this.urls.certUrl}).then(function(t){setTimeout(e.$route.back(-1),1e3),e.$message({type:"success",message:"充值成功"})}).catch(function(t){e.$message({type:"error",message:t.message||"充值失败"})})},turnrouter:function(){this.$router.back(-1)},handleUploadSuccess:function(e){var t=this;return function(r,o){t.images[e]=URL.createObjectURL(o.raw),t.urls[e]=r}},handleUploadProgress:function(e){var t=this;return function(r,o){r.lengthComputable&&(t.progress[e]=r.percent)}},handleRemove:function(e,t){console.log("handleRemove",e,t)},handleBeforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,o=e.size/1024/1024<3;return t||r||this.$message.error("上传图片只支持png，jpeg格式"),o||this.$message.error("上传图片大小不能超过 3MB"),(t||r)&&o}}},l=a,i=(r("ZNE0"),r("KHd+")),u=Object(i["a"])(l,o,s,!1,null,"1ff69755",null);t["default"]=u.exports},"Nc/l":function(e,t,r){},ZNE0:function(e,t,r){"use strict";var o=r("Nc/l"),s=r.n(o);s.a}}]);
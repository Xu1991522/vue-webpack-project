(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{Lt1E:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("BackButton"),r("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"提现金额:",prop:"withdrawAmount"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off",placeholder:"请输入企业ID"},model:{value:t.form.withdrawAmount,callback:function(e){t.$set(t.form,"withdrawAmount",e)},expression:"form.withdrawAmount"}})],1),r("el-form-item",{attrs:{label:"可提金额:"}},[t._v("\n        ¥"+t._s(t.OrganizationBean.banlance)+"\n      ")]),r("el-form-item",{attrs:{label:"收款账号:"}},[t._v("\n        "+t._s(t.OrganizationBean.debitAccount)+"\n      ")]),r("el-form-item",{attrs:{label:"收款企业/人:"}},[t._v("\n        "+t._s(t.OrganizationBean.accountName)+"\n      ")]),r("el-form-item",{attrs:{label:"开户银行:"}},[t._v("\n        "+t._s(t.OrganizationBean.debitAccount)+"\n      ")]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("提现")]),r("el-button",{on:{click:t.turnrouter}},[t._v("取消")])],1)],1)],1)},a=[],o=(r("VRzm"),r("Nlzp")),i={data:function(){return{form:{withdrawAmount:0},brokerOrder:{},OrganizationBean:{balance:"",debitAccount:"",accountName:"",bankName:""},rules:{withdrawAmount:[{required:!0,message:"请输入提现金额",trigger:"blur"},{type:"number",message:"请输入正确的金额",trigger:"blur"}]}}},created:function(){this.getBankAccount(),this.getOrg(),"BROKER"===this.$route.query.orgCategory&&this.listBrokerOrders()},computed:{user:function(){return this.$store.getters.user},distributorId:function(){return this.$route.query.distributorId?this.$route.query.distributorId:""}},methods:{listBrokerOrders:function(){var t=this;o["a"].IAccountManager.listBrokerOrders({brokerId:this.user.orgId,distributorId:this.distributorId,index:0,pageSize:10}).then(function(e){t.brokerOrder=e.brokerOrderBeans[0]}).catch(function(e){t.$message({type:"error",message:e.message||"获取提现代理商对象失败"})})},getOrg:function(){var t=this;o["a"].IAccountManager.getOrg({orgId:this.user.orgId}).then(function(e){t.OrganizationBean.balance=e.distributorBalance||e.brokerBalance}).catch(function(e){t.$message({type:"error",message:e.message||"获取余额失败"})})},getBankAccount:function(){var t=this;o["a"].IAccountManager.getBankAccount({orgId:this.user.orgId}).then(function(e){t.OrganizationBean.debitAccount=e.debitAccount,t.OrganizationBean.accountName=e.accountName,t.OrganizationBean.bankName=e.bankName}).catch(function(e){t.$message({type:"error",message:e.message||"获取银行信息失败"})})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.withdraw()})},withdraw:function(){var t=this;o["a"].IAccountManager.withdraw({orgId:this.user.orgId,orgCategory:this.$route.query.orgCategory,withdrawAmount:this.form.withdrawAmount,orderForm:this.brokerOrder}).then(function(e){setTimeout(t.$route.back(-1),1e3),t.$message({type:"success",message:"提现成功"})}).catch(function(e){t.$message({type:"error",message:e.message||"提现失败"})})},turnrouter:function(){this.$router.back(-1)}}},s=i,u=(r("S0Tq"),r("KHd+")),c=Object(u["a"])(s,n,a,!1,null,"01fb10b8",null);e["default"]=c.exports},S0Tq:function(t,e,r){"use strict";var n=r("cdaQ"),a=r.n(n);a.a},cdaQ:function(t,e,r){}}]);
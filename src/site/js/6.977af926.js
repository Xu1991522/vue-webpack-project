(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0hw4":function(e,t,r){"use strict";var a=r("AvL1"),n=r.n(a);n.a},"7a8f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("BackButton"),r("div",{staticClass:"title"},[e._v("财务帐单")]),r("div",{staticClass:"search-row"},[r("span",{staticClass:"search-type"},[e._v("交易类型")]),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.orderCategory,callback:function(t){e.orderCategory=t},expression:"orderCategory"}},e._l(e.orderCategoryoptions,function(e){return r("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),r("span",{staticClass:"search-type"},[e._v("订单创建时间")]),r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.createTimeStart,callback:function(t){e.createTimeStart=t},expression:"createTimeStart"}}),r("span",{staticStyle:{margin:"0 10px","font-size":"14px"}},[e._v("到")]),r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.createTimeEnd,callback:function(t){e.createTimeEnd=t},expression:"createTimeEnd"}}),r("el-button",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary"},on:{click:e.listBrokerOrders}},[e._v("搜索")]),r("span",{staticClass:"racleicon reverse"}),r("span",{staticClass:"racleicon donwload"})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.orderFormBeans,"max-height":e.clientHeight,border:""}},[r("el-table-column",{attrs:{label:"订单编号","min-width":e.orderFormBeans.every(function(e){return""===e.orderId||null===e.orderId})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""===t.row.orderId||null===t.row.orderId?"-":t.row.orderId)+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"交易类型","min-width":e.orderFormBeans.every(function(e){return""===e.orderCategory||null===e.orderCategory})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""===t.row.orderCategory||null===t.row.orderCategory?"-":t.row.orderCategory)+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"金额","min-width":e.orderFormBeans.every(function(e){return""===e.amount||null===e.amount})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""===t.row.amount||null===t.row.amount?"-":"¥"+t.row.amount)+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"订单状态","min-width":e.orderFormBeans.every(function(e){return""===e.orderStatus||null===e.orderStatus})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""===t.row.orderStatus||null===t.row.orderStatus?"-":t.row.orderStatus)+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"订单创建时间","min-width":e.orderFormBeans.every(function(e){return""===e.createTime||null===e.createTime})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("time")(""===t.row.createTime||null===t.row.createTime?"-":t.row.createTime,"yyyy-MM-dd HH:mm:ss"))+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"订单处理时间","min-width":e.orderFormBeans.every(function(e){return""===e.completeTime||null===e.completeTime})?"90":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("time")(""===t.row.completeTime||null===t.row.completeTime?"-":t.row.completeTime,"yyyy-MM-dd HH:mm:ss"))+"\n            ")]}}])})],1),r("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,40,50],"current-page":e.pager.pageIndex,layout:"sizes, prev, pager, next","page-size":e.pager.pageSize,total:e.pager.recCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],o=r("19FS"),i=r("Nlzp"),s={data:function(){return{form:{},rules:{distributorId:[{required:!0,message:"请输入企业id",trigger:"blur"}]},orderFormBeans:[],orderCategoryoptions:[{type:"PURCHASE",name:"采购"},{type:"HANDLE",name:"订购"},{type:"SETTLE",name:"结算"},{type:"CHANGE",name:"变更"},{type:"WITHDRAW",name:"提现"},{type:"DEPOSIT",name:"充值"}],clientHeight:0,dialogVisible:!1,loading:!0,createTimeStart:"",createTimeEnd:"",OrganizationBean:{balance:"",frozenAmount:""},orderCategory:"",pager:{pageIndex:1,pageSize:10,recCount:0}}},created:function(){this.clientHeight=document.body.clientHeight>=794?550:280,this.getOrg(),this.listBrokerOrders()},computed:{user:function(){return this.$store.getters.user}},watch:{dialogVisible:function(e){this.$refs["form"].resetFields()}},methods:{listBrokerOrders:function(){var e=this;i["a"].IAccountManager.listBrokerOrders({brokerId:this.user.orgId,distributorId:this.orderCategory,createTimeStart:this.createTimeStart,createTimeEnd:this.createTimeEnd,index:this.pager.index-1,pageSize:this.pager.pageSize}).then(function(t){e.loading=!1,e.orderFormBeans=t}).catch(function(t){e.$message({type:"error",message:t.message||"获取渠道商财务账单失败"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addAssociateSuperiorDistributor()})},addAssociateSuperiorDistributor:function(){var e=this;i["a"].IAccountManager.addAssociateSuperiorDistributor({brokerId:this.user.orgId,distributorId:this.form.distributorId,userId:this.user.id}).then(function(t){e.form.shortName=t.shortName}).catch(function(t){e.$message({type:"error",message:t.message||"初始化创建开通失败"})})},getOrg:function(){var e=this;i["a"].IAccountManager.getOrg({id:this.user.orgId}).then(function(t){e.form.shortName=t.shortName,e.OrganizationBean.balance=t.distributorBalance||t.brokerBalance,e.OrganizationBean.frozenAmount=t.frozenAmount}).catch(function(t){e.$message({type:"error",message:t.message||"初始化创建开通失败"})})},getAvailableAssociateSales:function(){var e=this;i["a"].IAccountManager.getAvailableAssociateSales({distributorId:this.form.distributorId,brokerId:this.user.orgId}).then(function(t){e.form.shortName=t.shortName}).catch(function(t){e.$message({type:"error",message:t.message||"初始化创建开通失败"})})},turnrouter:function(e){this.$router.push({path:"充值"===e?"distributor/charge":"distributor/withdraw",query:{title:e}})},handleCurrentChange:function(e){this.pager.pageIndex=e,this.listByCondition()},handleSizeChange:function(e){this.pager.pageSize=e,this.listByCondition()}},filters:{time:function(e,t){return e?o["format"](e,t):"-"}}},l=s,u=(r("0hw4"),r("KHd+")),d=Object(u["a"])(l,a,n,!1,null,"5476b99e",null);t["default"]=d.exports},AvL1:function(e,t,r){}}]);
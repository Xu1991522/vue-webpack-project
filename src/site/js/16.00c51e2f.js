(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{CtW6:function(e,t,a){},THqx:function(e,t,a){"use strict";var n=a("CtW6"),r=a.n(n);r.a},muvl:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container__roles"},[a("div",[a("div",{staticClass:"tab-con"},[e.access.add?a("div",{staticClass:"authCreate"},[a("el-row",{staticClass:"roleBtn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.$router.push({path:"/authorityManage/addRoles",query:{title:"添加角色"}})}}},[e._v("添加角色")])],1)],1):e._e(),a("div",{staticClass:"authTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"角色名称",align:"center",width:"280"}}),a("el-table-column",{attrs:{label:"权限列表",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#038ae3"},attrs:{type:"text"},on:{click:function(a){e.$router.push({path:"/authorityManage/assignPermissions",query:{id:t.row.id,name:t.row.name,title:t.row.name+"权限列表"}})}}},[e._v("\n                查看详情\n              ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.access.remove?a("el-button",{attrs:{disabled:-1===e.removable.indexOf(t.row.id),type:"text"},on:{click:function(a){e.deleteRole(t.row)}}},[e._v("删除")]):a("span",[e._v("-")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.pager.index,layout:"prev, pager, next","page-size":e.pager.size,total:e.pager.count},on:{"current-change":function(t){e.pager.index=t}}})],1)])])])},r=[],s=a("k5N+"),i=(a("rGqo"),a("yt8O"),a("Nlzp")),o={name:"",data:function(){return{loading:!0,source:[],removable:[],pager:{index:1,size:10,count:0}}},computed:{roles:function(){var e=this.pager,t=e.index,a=e.size,n=(t-1)*a;return this.source.slice(n,n+a)},access:function(){var e=this.$store.getters.access,t=e.ADD_ROLE,a=e.REMOVE_ROLE;return{add:t,remove:a}}},methods:{setup:function(){var e=this,t=i["a"].IOrganizationManager.getOrgRoles({userId:this.$store.getters.user.id}),a=[];Promise.all([t,a]).then(function(t){var a=Object(s["a"])(t,2),n=a[0],r=a[1];e.source=n,e.pager={index:1,size:e.pager.size,count:n.length},e.removable=r.map(function(e){return e.id}),e.loading=!1}).catch(function(t){e.$message({type:"error",message:t.message||"获取角色信息失败"})})},deleteRole:function(e){var t=this,a=function(){var a=e.id;i["a"].IUserService.deleteRole({roleId:a}).then(function(e){t.source=t.source.filter(function(e){return e.id!==a});var n=t.pager,r=n.index,s=n.size,i=t.source.length,o=Math.ceil(i/s);t.pager={index:r>o?o:r,size:s,count:i},t.$message({type:"success",message:"角色删除成功"})}).catch(function(e){t.$message({type:"error",message:e.message||"角色删除失败"})})};this.$msgbox({title:"删除角色",message:"您确定要删除该角色吗？",showCancelButton:!0}).then(a).catch(function(e){return e})}},created:function(){this.setup()}},c=o,l=(a("yMTl"),a("THqx"),a("KHd+")),u=Object(l["a"])(c,n,r,!1,null,"9c772c36",null);t["default"]=u.exports},oNFg:function(e,t,a){},yMTl:function(e,t,a){"use strict";var n=a("oNFg"),r=a.n(n);r.a}}]);